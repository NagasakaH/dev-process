# タスク: task02-03 - Reactプロジェクト初期化・ソースコード・MSW設定

## タスク情報

| 項目 | 値 |
|------|-----|
| タスク識別子 | task02-03 |
| タスク名 | Reactプロジェクト初期化・ソースコード・MSW設定 |
| 前提条件タスク | task01 |
| 並列実行可否 | 可（task02-01, task02-02と並列） |
| 推定所要時間 | 15分 |
| 優先度 | 高 |

---

## 作業環境

- **作業ディレクトリ（worktree）**: /tmp/WEB-DESIGN-001-task02-03/
- **ブランチ**: WEB-DESIGN-001-task02-03
- **対象リポジトリ**: submodules/web-design
- **重要**: 必ず上記の作業ディレクトリ内で作業を行ってください

---

## 前提条件

### 前提タスク成果物

| タスク | 成果物パス | 参照内容 |
|--------|------------|----------|
| task01 | `.devcontainer/devcontainer.json` | features（Node.js環境の確認） |

### 確認事項

- [ ] task01が完了していること
- [ ] task01のコミットがcherry-pick済みであること

---

## 作業内容

### 目的

Vite + React + TypeScript + Tailwind CSS のプロジェクトを初期化し、ソースコード・MSWモック設定・各種設定ファイルを作成する。

### 設計参照

- [design/03_data-structure-design.md](../design/03_data-structure-design.md) — package.json, vite.config.ts, tsconfig, eslint.config.js, .prettierrc, ソースコード構造, MSW設計

### 実装ステップ

#### Part 1: プロジェクト設定ファイル

1. `package.json` を作成（dependencies + devDependencies + scripts）
2. `index.html` を作成（Viteエントリポイント）
3. `vite.config.ts` を作成（react + tailwindcss プラグイン、server.watch.usePolling）
4. `tsconfig.json` を作成（references方式）
5. `tsconfig.app.json` を作成（React JSX設定）
6. `tsconfig.node.json` を作成（Node.js設定）
7. `eslint.config.js` を作成（Flat Config、React + TypeScript）
8. `.prettierrc` を作成
9. `.gitignore` を作成

#### Part 2: Reactソースコード

10. `src/App.tsx` を作成（メインAppコンポーネント）
11. `src/App.css` を作成（Appスタイル）
12. `src/main.tsx` を作成（MSW初期化 + ReactDOM.createRoot）
13. `src/index.css` を作成（Tailwind CSS directives: `@import "tailwindcss"`）
14. `src/vite-env.d.ts` を作成（Vite型定義参照）
15. `src/components/.gitkeep` を作成

#### Part 3: MSWモック設定

16. `src/mocks/handlers.ts` を作成（`/api/health` ハンドラー）
17. `src/mocks/browser.ts` を作成（setupWorker）

### 対象ファイル

| ファイル | 操作 | 説明 |
|----------|------|------|
| `package.json` | 新規作成 | React 19 + Vite 6 + Tailwind CSS 4 + MSW 2 + Playwright |
| `index.html` | 新規作成 | Viteエントリポイント HTML |
| `vite.config.ts` | 新規作成 | react + tailwindcss プラグイン + usePolling |
| `tsconfig.json` | 新規作成 | references方式（app + node） |
| `tsconfig.app.json` | 新規作成 | React JSX + strict |
| `tsconfig.node.json` | 新規作成 | ES2022 + strict |
| `eslint.config.js` | 新規作成 | Flat Config + react-hooks + react-refresh |
| `.prettierrc` | 新規作成 | semi, singleQuote, tabWidth:2 |
| `.gitignore` | 新規作成 | node_modules, dist, .env等 |
| `src/App.tsx` | 新規作成 | メインAppコンポーネント（Vite + Reactテンプレート） |
| `src/App.css` | 新規作成 | Appスタイル |
| `src/main.tsx` | 新規作成 | MSW初期化 + ReactDOM render |
| `src/index.css` | 新規作成 | `@import "tailwindcss"` |
| `src/vite-env.d.ts` | 新規作成 | `/// <reference types="vite/client" />` |
| `src/components/.gitkeep` | 新規作成 | 空ディレクトリ保持 |
| `src/mocks/handlers.ts` | 新規作成 | `/api/health` モックハンドラー |
| `src/mocks/browser.ts` | 新規作成 | MSW setupWorker |

---

## テスト方針

テスト戦略はE2Eのみのため、このタスクでは個別テストは作成しない。
E2Eテスト（task03）で以下を検証する:
- E2E-2: Reactアプリがプレビューできること
- E2E-8: HMR反映が動作すること
- E2E-9: MSWモック応答が返ること
- E2E-10: MSWモック統合が動作すること

### 実装時の確認

```bash
# package.jsonの構文チェック
cat package.json | python3 -m json.tool > /dev/null

# TypeScript設定の構文チェック
cat tsconfig.json | python3 -m json.tool > /dev/null
cat tsconfig.app.json | python3 -m json.tool > /dev/null
cat tsconfig.node.json | python3 -m json.tool > /dev/null

# .prettierrcの構文チェック
cat .prettierrc | python3 -m json.tool > /dev/null
```

---

## 成果物

### 期待される出力

| 成果物 | パス | 説明 |
|--------|------|------|
| プロジェクト設定 | `package.json` 他8ファイル | Vite + React + TypeScript + Tailwind CSS設定 |
| Reactソースコード | `src/` 配下6ファイル | App, main, スタイル, 型定義 |
| MSWモック | `src/mocks/` 配下2ファイル | handlers + browser worker |

---

## 完了条件

### 機能的条件

- [ ] `package.json` にReact 19, Vite 6, Tailwind CSS 4, MSW 2, Playwright の依存が定義されていること
- [ ] `package.json` のscriptsに dev, build, preview, lint, format, test:e2e が定義されていること
- [ ] `vite.config.ts` にreact + tailwindcssプラグインとusePolling設定があること
- [ ] `tsconfig.json` がreferences方式（app + node）であること
- [ ] `eslint.config.js` がFlat Config形式でReact + TypeScript対応であること
- [ ] `index.html` にid="root"のdiv要素と`/src/main.tsx`のscript参照があること
- [ ] `src/main.tsx` でMSWの条件付き初期化（`import.meta.env.DEV`）が実装されていること
- [ ] `src/index.css` に `@import "tailwindcss"` が記述されていること（Tailwind CSS v4方式）
- [ ] `src/mocks/handlers.ts` に `/api/health` ハンドラーが定義されていること
- [ ] `src/mocks/browser.ts` で setupWorker が設定されていること
- [ ] `src/App.tsx` に "Vite + React" テキストが含まれること（E2Eテストの検証対象）

### 品質条件

- [ ] 全JSONファイルが有効な構文であること
- [ ] TypeScriptファイルに明らかな構文エラーがないこと

---

## コミット

```bash
cd /tmp/WEB-DESIGN-001-task02-03/
git add -A
git status
git diff --staged

git commit -m "feat(react): Vite+React+TypeScript+TailwindCSS+MSWプロジェクトを初期化

- package.json: React 19, Vite 6, Tailwind CSS 4, MSW 2
- vite.config.ts: react+tailwindcssプラグイン, usePolling
- tsconfig: references方式 (app + node)
- eslint.config.js: Flat Config + React hooks/refresh
- src/: App, main(MSW初期化), index.css(Tailwind), mocks
- MSW: /api/health モックハンドラー

Co-authored-by: Copilot <223556219+Copilot@users.noreply.github.com>"

git rev-parse HEAD
```

---

## 注意事項

- MRD-007: Tailwind CSS v4ではCSS-first設定。`tailwind.config.js` は不要。`index.css` に `@import "tailwindcss"` を記載するだけ
- MRD-008: main.tsxのMSW初期化は `import.meta.env.DEV` で開発環境のみ有効化、動的importで本番ビルドから除外
- MRD-009: ESLintはv9 Flat Config形式で、`mockServiceWorker.js` をignoresに追加
- `public/mockServiceWorker.js` はnpx msw initで生成するため、このタスクでは作成しない（devcontainer内で `npx msw init public/` を実行する想定）
- `src/App.tsx` には "Vite + React" テキストを含めること（E2E-2, E2E-8のHMRテストで参照）
