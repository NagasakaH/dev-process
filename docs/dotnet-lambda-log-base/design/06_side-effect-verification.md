# 弊害検証計画

## 副作用分析

新規テンプレートプロジェクトのため、既存コードへの副作用はなし。
以下はテンプレート利用時に発生しうるリスクを検証する。

### リスク項目

| リスク | 影響度 | 発生可能性 | 検証方法 |
|--------|--------|------------|----------|
| Lambda タイムアウト時のログロスト | 高 | 中 | Flush 前後のバッファ状態を単体テストで検証 |
| PutLogEvents バッチサイズ超過 | 中 | 低 | 大量ログ投入テスト |
| メモリリーク（バッファ未解放） | 中 | 低 | Dispose/Clear の単体テスト |
| CloudWatch Logs API スロットリング | 低 | 低 | リトライロジックの単体テスト |

## 検証項目

### パフォーマンス検証
- [ ] LogBuffer への追加が O(1) であること（ConcurrentQueue）
- [ ] JSON シリアライゼーションのオーバーヘッド確認
- [ ] 1000件のログエントリの Flush 時間が妥当であること

### セキュリティ検証
- [ ] ログに機密情報（パスワード、トークン等）が出力されない設計であること
- [ ] IAM ポリシーで最小権限原則が適用されていること（Terraform）
- [ ] S3 バケットがパブリックアクセス不可であること（Terraform）

### 互換性検証
- [ ] .NET 8 Lambda Managed Runtime で動作すること
- [ ] ILogger 標準インターフェースとの互換性
- [ ] DI コンテナ（Microsoft.Extensions.DependencyInjection）との統合

### Terraform 検証
- [ ] `terraform validate` が成功すること
- [ ] `terraform plan` でリソースが正しく定義されること
- [ ] Checkov セキュリティスキャンに合格すること

## ロールバック計画

新規テンプレートのためロールバック不要。テンプレートの修正は通常の Git ワークフローで対応。
