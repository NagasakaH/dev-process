# 実行プロセス テンプレート集

## 目次

1. [子エージェント依頼テンプレート](#子エージェント依頼テンプレート)
2. [result.mdテンプレート](#resultmdテンプレート)
3. [実行履歴エントリテンプレート](#実行履歴エントリテンプレート)
4. [並列実行グループ記録](#並列実行グループ記録)

---

## 子エージェント依頼テンプレート

### 基本形式

```markdown
## 作業情報
- リポジトリ: {repository-path}
- タスク名: {task-name}
- 作業: 実行
- 実行タスク: {task-id}（例: task01, task02-01）
- **成果物出力先**: {EXECUTION_DIR}/{task-id}/（絶対パス）
- 前提成果物: {前提条件タスクの成果物パス}

## 期待される成果物
以下のファイルを成果物出力先に作成してください:
- `result.md` - タスク実行結果レポート（必須）
- その他、タスクに関連する成果物

## 前提条件
- 前提条件タスク: {prerequisite-task-ids}
- 前提タスク成果物: {前提タスクの出力先パス一覧}

## 計画書
{計画成果物へのパス参照}

## 実行内容
以下を実施してください：
1. 前提条件タスクの結果を確認
2. {具体的なタスク内容}を実装
3. コード品質チェック（lint, test等）
4. 変更内容をドキュメント化

## 成果物の形式
結果レポートには以下を含めてください：
- 実装完了状況
- 変更ファイル一覧
- テスト結果
- 品質チェック結果
- 次のタスク依頼への依存関係
```

### 並列タスク依頼例

```markdown
## 作業情報
- リポジトリ: /workspaces/my-project
- タスク名: API機能追加
- 作業: 実行
- 実行タスク: task04-01
- **成果物出力先**: /docs/20260208-0149-API機能追加/04_実行/task04-01/
- 前提成果物: /docs/20260208-0149-API機能追加/03_計画/task-plan.md

## 期待される成果物
- `result.md` - タスク実行結果レポート
- 変更されたソースファイル

## 前提条件
- 前提条件タスク: task03
- 前提タスク成果物: /docs/20260208-0149-API機能追加/03_計画/

## 実行内容
1. task-plan.mdのtask04-01の内容を確認
2. APIエンドポイント `/users` を実装
3. 単体テストを作成・実行
4. result.mdに結果を記録
```

---

## result.mdテンプレート

各タスク完了時に作成する結果レポートの形式。

```markdown
# タスク実行結果: {task-id}

## 概要

- **タスク識別子**: {task-id}
- **実行日時**: {timestamp}
- **ステータス**: 完了 / 一部完了 / 失敗

## 実装完了状況

### 完了した作業

- {完了項目1}
- {完了項目2}

### 未完了の作業（該当する場合）

- {未完了項目}: {理由}

## 変更ファイル一覧

| ファイル | 変更種別 | 説明 |
|----------|----------|------|
| `src/api/users.ts` | 新規作成 | ユーザーAPIエンドポイント |
| `src/models/user.ts` | 修正 | 型定義の追加 |
| `tests/api/users.test.ts` | 新規作成 | 単体テスト |

## テスト結果

```
実行コマンド: npm test
結果: PASS
テスト数: 15 passed, 0 failed
カバレッジ: 85%
```

## 品質チェック結果

| チェック項目 | 結果 | 備考 |
|--------------|------|------|
| Linter | ✓ Pass | ESLint |
| 型チェック | ✓ Pass | TypeScript |
| テスト | ✓ Pass | 15/15 |

## 次タスクへの依存情報

### 生成された成果物

後続タスクが参照可能:

- `src/api/users.ts` - ユーザーAPI実装
- `src/types/user.d.ts` - 型定義

### 注意事項

- {後続タスクへの申し送り事項}

## 備考

{その他特記事項}
```

---

## 実行履歴エントリテンプレート

`実行履歴.md` に追記するエントリ形式。

### タスク開始時

```markdown
### {task-id}: {タスク名}

- **ステータス**: 進行中
- **依頼時刻**: {YYYY-MM-DD HH:MM}
- **完了時刻**: -
- **前提条件**: {prerequisite-task-ids}
- **成果物出力先**: `{path}`
- **依頼内容**: {依頼プロンプト概要}
- **結果概要**: [進行中...]
```

### タスク完了時

```markdown
### {task-id}: {タスク名}

- **ステータス**: ✓ 完了
- **依頼時刻**: {YYYY-MM-DD HH:MM}
- **完了時刻**: {YYYY-MM-DD HH:MM}
- **前提条件**: {prerequisite-task-ids}
- **成果物出力先**: `{path}`
- **依頼内容**: {依頼プロンプト概要}
- **生成された成果物**:
  - `result.md`
  - {その他ファイル}
- **結果概要**: {結果のサマリー}
```

### タスク失敗時

```markdown
### {task-id}: {タスク名}

- **ステータス**: ✗ 失敗
- **依頼時刻**: {YYYY-MM-DD HH:MM}
- **完了時刻**: {YYYY-MM-DD HH:MM}
- **前提条件**: {prerequisite-task-ids}
- **成果物出力先**: `{path}`
- **依頼内容**: {依頼プロンプト概要}
- **失敗理由**: {エラー内容}
- **対応**: {リトライ / 代替案 / 保留}
```

---

## 並列実行グループ記録

`実行履歴.md` の並列実行管理セクション。

```markdown
## 並列実行管理

### 並列グループ

- **Group-1**: task02-01, task02-02 (同時実行可能)
  - 共通前提条件: task01
  - ステータス: 全完了
  
- **Group-2**: task04-01, task04-02, task04-03 (同時実行可能)
  - 共通前提条件: task03
  - ステータス: 2/3完了

### クリティカルパス

```
task01 → task02-01/task02-02 → task03 → task04-01/task04-02/task04-03 → task05
```

### 実行状況サマリー

| グループ | タスク数 | 完了 | 進行中 | 待機 |
|----------|----------|------|--------|------|
| Group-1 | 2 | 2 | 0 | 0 |
| Group-2 | 3 | 2 | 1 | 0 |
```

---

## ディレクトリ作成コマンド

計画書からタスク一覧を抽出後、一括でディレクトリを作成:

```bash
# 変数設定
EXECUTION_DIR="${TASK_DIR}/04_実行"

# タスク一覧に基づいて作成
mkdir -p "${EXECUTION_DIR}/task01"
mkdir -p "${EXECUTION_DIR}/task02-01"
mkdir -p "${EXECUTION_DIR}/task02-02"
mkdir -p "${EXECUTION_DIR}/task03"
mkdir -p "${EXECUTION_DIR}/task04-01"
mkdir -p "${EXECUTION_DIR}/task04-02"
# ... 計画書のタスク数に応じて追加
```
